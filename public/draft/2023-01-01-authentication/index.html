<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Authentication | Küse&#39;s Codes</title>
<meta name="keywords" content="Microsoft login, Apple-Id, Bolero, F#">
<meta name="description" content="Collect information about authentication.
AspNet.Security.OAuth.Providers
Good samples of aspnet MVC with google, twitter, Apple-ID:
https://github.com/aspnet-contrib/AspNet.Security.OAuth.Providers

AspNet.Security.OAuth.Providers is a collection of security middleware that you can use in your ASP.NET Coreapplication to support social authentication providers like GitHub, Foursquare or Dropbox. It is directly inspired by Jerrie Pelser&rsquo;s initiative, Owin.Security.Providers.">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/draft/2023-01-01-authentication/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css" integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U&#43;6hYRq/Ez/nm5vg=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/draft/2023-01-01-authentication/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>




</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Küse&#39;s Codes (Alt + H)">Küse&#39;s Codes</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/post" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/draft" title="Drafts">
                    <span>Drafts</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/categories" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about" title="About me">
                    <span>About me</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;»&nbsp;<a href="http://localhost:1313/draft/">Drafts</a></div>
    <h1 class="post-title">
      Authentication<sup><span class="entry-isdraft">&nbsp;&nbsp;[draft]</span></sup>
    </h1>
    <div class="post-meta"><span title='2023-01-01 00:00:00 +0000 UTC'>January 1, 2023</span>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul><ul>
                <li>
                    <a href="#aspnetsecurityoauthproviders" aria-label="AspNet.Security.OAuth.Providers">AspNet.Security.OAuth.Providers</a></li>
                <li>
                    <a href="#azure-ad-with-bolero" aria-label="Azure AD with bolero">Azure AD with bolero</a></li>
                <li>
                    <a href="#overview-aspnet-core-authentication" aria-label="Overview ASP.NET Core authentication">Overview ASP.NET Core authentication</a></li>
                <li>
                    <a href="#authentication-with-net70" aria-label="Authentication with net7.0">Authentication with net7.0</a></li>
                <li>
                    <a href="#external-authentication-services" aria-label="External Authentication Services">External Authentication Services</a></li>
                <li>
                    <a href="#bolero-authentication" aria-label="Bolero Authentication">Bolero Authentication</a></li>
                <li>
                    <a href="#azure" aria-label="Azure">Azure</a></li>
                <li>
                    <a href="#using-scaffolding" aria-label="Using Scaffolding">Using Scaffolding</a></li></ul>
                    
                <li>
                    <a href="#bolero-and-authentication" aria-label="Bolero and Authentication">Bolero and Authentication</a></li>
                <li>
                    <a href="#authentication-in-giraffe" aria-label="Authentication in giraffe">Authentication in giraffe</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>Collect information about authentication.</p>
<h3 id="aspnetsecurityoauthproviders">AspNet.Security.OAuth.Providers<a hidden class="anchor" aria-hidden="true" href="#aspnetsecurityoauthproviders">#</a></h3>
<p>Good samples of aspnet MVC with google, twitter, Apple-ID:</p>
<p><a href="https://github.com/aspnet-contrib/AspNet.Security.OAuth.Providers">https://github.com/aspnet-contrib/AspNet.Security.OAuth.Providers</a></p>
<blockquote>
<p><strong>AspNet.Security.OAuth.Providers</strong> is a <strong>collection of security middleware</strong> that you can use in your <strong>ASP.NET Core</strong>application to support social authentication providers like <strong><a href="https://github.com/">GitHub</a></strong>, <strong><a href="https://foursquare.com/">Foursquare</a></strong> or <strong><a href="https://www.dropbox.com/">Dropbox</a></strong>. It is directly inspired by <strong><a href="https://github.com/jerriep">Jerrie Pelser</a></strong>&rsquo;s initiative, <strong><a href="https://github.com/RockstarLabs/OwinOAuthProviders">Owin.Security.Providers</a></strong>.</p>
</blockquote>
<h3 id="azure-ad-with-bolero">Azure AD with bolero<a hidden class="anchor" aria-hidden="true" href="#azure-ad-with-bolero">#</a></h3>
<blockquote>
<p>This is an example of how to authenticate with an <code>Azure AD</code> using <code>MSAL.js</code>.</p>
</blockquote>
<p><a href="https://github.com/anderslm/fsharp-bolero-azure-ad">https://github.com/anderslm/fsharp-bolero-azure-ad</a></p>
<h3 id="overview-aspnet-core-authentication">Overview ASP.NET Core authentication<a hidden class="anchor" aria-hidden="true" href="#overview-aspnet-core-authentication">#</a></h3>
<p><a href="https://learn.microsoft.com/en-us/aspnet/core/security/authentication/?view=aspnetcore-7.0">https://learn.microsoft.com/en-us/aspnet/core/security/authentication/?view=aspnetcore-7.0</a></p>
<p><strong>Simple authorization</strong></p>
<p><a href="https://learn.microsoft.com/en-us/aspnet/core/security/authorization/simple?source=recommendations&amp;view=aspnetcore-7.0">https://learn.microsoft.com/en-us/aspnet/core/security/authorization/simple?source=recommendations&amp;view=aspnetcore-7.0</a></p>
<h3 id="authentication-with-net70">Authentication with net7.0<a hidden class="anchor" aria-hidden="true" href="#authentication-with-net70">#</a></h3>
<p><a href="https://learn.microsoft.com/en-us/aspnet/core/security/authentication/social/?view=aspnetcore-7.0&amp;tabs=visual-studio-code">https://learn.microsoft.com/en-us/aspnet/core/security/authentication/social/?view=aspnetcore-7.0&amp;tabs=visual-studio-code</a></p>
<p>Local code: <a href="file:///Users/mmgreiner/Projects/Scrap/TestAuthorization/TestAuthorization">file:///Users/mmgreiner/Projects/Scrap/TestAuthorization/TestAuthorization</a></p>
<h3 id="external-authentication-services">External Authentication Services<a hidden class="anchor" aria-hidden="true" href="#external-authentication-services">#</a></h3>
<p><a href="https://learn.microsoft.com/en-us/aspnet/web-api/overview/security/external-authentication-services?source=recommendations">https://learn.microsoft.com/en-us/aspnet/web-api/overview/security/external-authentication-services?source=recommendations</a></p>
<p>Covers:</p>
<ul>
<li>
<p><a href="https://learn.microsoft.com/en-us/aspnet/web-api/overview/security/external-authentication-services?source=recommendations#FACEBOOK">Enabling Facebook Authentication</a></p>
</li>
<li>
<p><a href="https://learn.microsoft.com/en-us/aspnet/web-api/overview/security/external-authentication-services?source=recommendations#GOOGLE">Enabling Google Authentication</a></p>
</li>
<li>
<p><a href="https://learn.microsoft.com/en-us/aspnet/web-api/overview/security/external-authentication-services?source=recommendations#MICROSOFT">Enabling Microsoft Authentication</a></p>
</li>
<li>
<p><a href="https://learn.microsoft.com/en-us/aspnet/web-api/overview/security/external-authentication-services?source=recommendations#TWITTER">Enabling Twitter Authentication</a></p>
</li>
</ul>
<h3 id="bolero-authentication">Bolero Authentication<a hidden class="anchor" aria-hidden="true" href="#bolero-authentication">#</a></h3>
<p>See <a href="https://fsbolero.io/docs/Remoting#authentication-and-authorization">https://fsbolero.io/docs/Remoting#authentication-and-authorization</a></p>
<h3 id="azure">Azure<a hidden class="anchor" aria-hidden="true" href="#azure">#</a></h3>
<p><a href="https://github.com/AzureADQuickStarts/AppModelv2-WebApp-OpenIdConnect-DotNet">https://github.com/AzureADQuickStarts/AppModelv2-WebApp-OpenIdConnect-DotNet</a></p>
<blockquote>
<p>This sample demonstrates a ASP.NET web app application that authenticates users against Azure AD.</p>
</blockquote>
<p>locally on <a href="file:///Users/mmgreiner/Projects/Scrap/sign-in/AppModelv2-WebApp-OpenIDConnect-DotNet-master">file:///Users/mmgreiner/Projects/Scrap/sign-in/AppModelv2-WebApp-OpenIDConnect-DotNet-master</a></p>
<h3 id="using-scaffolding">Using Scaffolding<a hidden class="anchor" aria-hidden="true" href="#using-scaffolding">#</a></h3>
<p>See <a href="https://learn.microsoft.com/en-us/aspnet/core/security/authentication/scaffold-identity?view=aspnetcore-7.0&amp;tabs=netcore-cli#scaffold-identity-into-a-razor-project-without-existing-authorization">Scaffold identity into razor without existing authorization</a></p>
<p>Create bolero app:</p>
<pre><code>dotnet new bolero-app -o BoleroIdentityApp
cd BoleroIdentityApp/src/*Server
</code></pre>
<p>Start installing the tools</p>
<pre><code>dotnet   add package Microsoft.VisualStudio.Web.CodeGeneration.Design
</code></pre>
<p>Run the identity scaffolder</p>
<pre><code>dotnet tool install -g dotnet-aspnet-codegenerator
</code></pre>
<p>Install the packages:</p>
<pre tabindex="0"><code>dotnet add package Microsoft.VisualStudio.Web.CodeGeneration.Design
dotnet add package Microsoft.EntityFrameworkCore.Design
dotnet add package Microsoft.AspNetCore.Identity.EntityFrameworkCore
dotnet add package Microsoft.AspNetCore.Identity.UI
dotnet add package Microsoft.EntityFrameworkCore.SqlServer
dotnet add package Microsoft.EntityFrameworkCore.Tools
</code></pre><p>Project file should now look like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span> <span style="color:#f92672">&lt;ItemGroup&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;PackageReference</span> <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;Bolero.Server&#34;</span> <span style="color:#a6e22e">Version=</span><span style="color:#e6db74">&#34;0.*&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;PackageReference</span> <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;Bolero.HotReload.Server&#34;</span> <span style="color:#a6e22e">Version=</span><span style="color:#e6db74">&#34;0.*&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;PackageReference</span> <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;Microsoft.AspNetCore.Components.WebAssembly.Server&#34;</span> <span style="color:#a6e22e">Version=</span><span style="color:#e6db74">&#34;7.0.*&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;PackageReference</span> <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;Microsoft.AspNetCore.Identity.EntityFrameworkCore&#34;</span> <span style="color:#a6e22e">Version=</span><span style="color:#e6db74">&#34;7.0.4&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;PackageReference</span> <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;Microsoft.AspNetCore.Identity.UI&#34;</span> <span style="color:#a6e22e">Version=</span><span style="color:#e6db74">&#34;7.0.4&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;PackageReference</span> <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;Microsoft.EntityFrameworkCore.Design&#34;</span> <span style="color:#a6e22e">Version=</span><span style="color:#e6db74">&#34;7.0.4&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;IncludeAssets&gt;</span>runtime; build; native; contentfiles; analyzers; buildtransitive<span style="color:#f92672">&lt;/IncludeAssets&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;PrivateAssets&gt;</span>all<span style="color:#f92672">&lt;/PrivateAssets&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/PackageReference&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;PackageReference</span> <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;Microsoft.EntityFrameworkCore.SqlServer&#34;</span> <span style="color:#a6e22e">Version=</span><span style="color:#e6db74">&#34;7.0.4&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;PackageReference</span> <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;Microsoft.EntityFrameworkCore.Tools&#34;</span> <span style="color:#a6e22e">Version=</span><span style="color:#e6db74">&#34;7.0.4&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;IncludeAssets&gt;</span>runtime; build; native; contentfiles; analyzers; buildtransitive<span style="color:#f92672">&lt;/IncludeAssets&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;PrivateAssets&gt;</span>all<span style="color:#f92672">&lt;/PrivateAssets&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/PackageReference&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;PackageReference</span> <span style="color:#a6e22e">Include=</span><span style="color:#e6db74">&#34;Microsoft.VisualStudio.Web.CodeGeneration.Design&#34;</span> <span style="color:#a6e22e">Version=</span><span style="color:#e6db74">&#34;7.0.5&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/ItemGroup&gt;</span>  
</span></span></code></pre></div><p>List identity options:</p>
<pre tabindex="0"><code>dotnet aspnet-codegenerator identity -h
Scaffolding failed.
Could not find project file in /Users/mmgreiner/Projects/Tutorials/BoleroIdentityApp/src/BoleroIdentityApp.Server

Usage: aspnet-codegenerator [arguments] [options]

Arguments:
  generator  Name of the generator. Check available generators below.

Options:
  -p|--project             Path to .csproj file in the project.
  -n|--nuget-package-dir   
  -c|--configuration       Configuration for the project (Possible values: Debug/ Release)
  -tfm|--target-framework  Target Framework to use. (Short folder name of the tfm. eg. net46)
  -b|--build-base-path     
  --no-build               

To see more information, enable tracing by setting environment variable &#39;codegen_trace&#39; = 1.
RunTime 00:00:00.22
</code></pre><p>This happens because the scaffolding tool looks for a C# project with <code>.csproj</code> file.
Try the same thing with a cs project.</p>
<pre><code>dotnet new web -o IdentityApp
cd IdentityApp
dotnet add package Microsoft.VisualStudio.Web.CodeGeneration.Design
dotnet add package Microsoft.EntityFrameworkCore.Design
dotnet add package Microsoft.AspNetCore.Identity.EntityFrameworkCore
dotnet add package Microsoft.AspNetCore.Identity.UI
dotnet add package Microsoft.EntityFrameworkCore.SqlServer
dotnet add package Microsoft.EntityFrameworkCore.Tools
ls                                                                 
IdentityApp.csproj		Properties			appsettings.json		obj
Program.cs			appsettings.Development.json	bin
</code></pre>
<h2 id="bolero-and-authentication">Bolero and Authentication<a hidden class="anchor" aria-hidden="true" href="#bolero-and-authentication">#</a></h2>
<p>The new net7.0 allows the following creatings:</p>
<table>
  <thead>
      <tr>
          <th>Web Type</th>
          <th>Description</th>
          <th>Create</th>
          <th>Authentication</th>
          <th>Language</th>
          <th>Comment</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Razor Pages</td>
          <td>Server based dynamic pages</td>
          <td><code>dotnet new webapp</code></td>
          <td><code>-au Individual</code></td>
          <td>C#</td>
          <td><a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/razor-pages/razor-pages-start?view=aspnetcore-7.0&amp;tabs=visual-studio-code">Razor Tutorial</a></td>
      </tr>
      <tr>
          <td>MVC</td>
          <td>Model View Control with Controllers</td>
          <td><code>dotnet new mvc</code></td>
          <td><code>-au Individual</code></td>
          <td>C#</td>
          <td><a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/first-mvc-app/start-mvc?view=aspnetcore-7.0&amp;tabs=visual-studio">MVC Tutorial</a></td>
      </tr>
      <tr>
          <td>Blazor</td>
          <td>Dynamic SPA pages</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<p>So the idea is, to create a Bolero App and create a Blazor App, and then copy the Blazor App pages that handle login to the Bolero App.</p>
<h2 id="authentication-in-giraffe">Authentication in giraffe<a hidden class="anchor" aria-hidden="true" href="#authentication-in-giraffe">#</a></h2>
<p>This is a good explanation of how to use EF Core also with [F#]:
<a href="https://carpenoctem.dev/blog/fsharp-giraffe-auth-identity-ef-core/">https://carpenoctem.dev/blog/fsharp-giraffe-auth-identity-ef-core/</a></p>
<p>[F#]: {{ site.fsharp_link }}</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/Microsoft-login/">Microsoft Login</a></li>
      <li><a href="http://localhost:1313/tags/Apple-Id/">Apple-Id</a></li>
      <li><a href="http://localhost:1313/tags/Bolero/">Bolero</a></li>
      <li><a href="http://localhost:1313/tags/F%23/">F#</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="http://localhost:1313/">Küse&#39;s Codes</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
